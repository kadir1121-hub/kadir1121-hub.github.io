<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>CarPixel Sitesi</title>
  <style>
    body {
      margin: 0;
      background-color: #111;
      color: #eee;
      font-family: Arial, sans-serif;
      user-select: none;
      overflow-x: hidden;
    }
    header, footer {
      background: #222;
      padding: 15px;
      text-align: center;
    }
    main {
      padding: 20px;
      max-width: 900px;
      margin: 0 auto;
    }
    h1, h2 {
      margin: 0 0 15px;
    }
    #pixelcar-game-section {
      margin-top: 40px;
    }
    /* Oyun canvas ve tuÅŸlar */
    #gameCanvas {
      background: #323232;
      border: 2px solid #555;
      display: block;
      margin: 10px auto;
      max-width: 100%;
      height: auto;
    }
    #controls {
      width: 280px;
      margin: 0 auto 30px auto;
      display: flex;
      justify-content: space-around;
      user-select: none;
    }
    .btn {
      background-color: #555;
      border-radius: 12px;
      width: 65px;
      height: 65px;
      color: white;
      font-size: 42px;
      line-height: 65px;
      text-align: center;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      transition: background-color 0.15s ease;
      user-select: none;
    }
    .btn:active {
      background-color: #999;
    }
  </style>
</head>
<body>

<header>
  <h1>CarPixel Sitesi</h1>
</header>

<main>
  <p>Burada sitenin diÄŸer iÃ§erikleri olabilir...</p>

  <section id="pixelcar-game-section">
    <h2>ðŸš— PixelCar Oyunu ðŸš—</h2>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div id="controls">
      <div id="leftBtn" class="btn">â—€</div>
      <div id="upBtn" class="btn">â–²</div>
      <div id="downBtn" class="btn">â–¼</div>
      <div id="rightBtn" class="btn">â–¶</div>
    </div>
  </section>
</main>

<footer>
  Â© 2025 CarPixel TÃ¼m haklarÄ± saklÄ±dÄ±r.
</footer>

<script>
(() => {
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  const WIDTH = canvas.width;
  const HEIGHT = canvas.height;

  const GRAY = 'rgb(50,50,50)';
  const YELLOW = 'rgb(255,255,0)';
  const RED = 'rgb(200,0,0)';
  const BLUE = 'rgb(0,0,255)';

  const carWidth = 40;
  const carHeight = 70;
  let carX = WIDTH / 2 - carWidth / 2;
  let carY = HEIGHT - carHeight - 20;
  const carSpeed = 5;

  const enemyWidth = 40;
  const enemyHeight = 70;
  const enemySpeed = 5;
  const enemyCount = 5;
  const enemyCars = [];

  function createEnemy() {
    const x = Math.floor(Math.random() * (WIDTH - 200)) + 100;
    const y = Math.floor(Math.random() * -600) - enemyHeight;
    return { x, y, width: enemyWidth, height: enemyHeight };
  }

  for(let i=0; i<enemyCount; i++){
    enemyCars.push(createEnemy());
  }

  const keys = { left:false, right:false, up:false, down:false };

  // Mobil tuÅŸlar iÃ§in
  const leftBtn = document.getElementById('leftBtn');
  const rightBtn = document.getElementById('rightBtn');
  const upBtn = document.getElementById('upBtn');
  const downBtn = document.getElementById('downBtn');

  function addTouchListeners(btn, keyName){
    btn.addEventListener('touchstart', e => {
      e.preventDefault();
      keys[keyName] = true;
    }, {passive:false});
    btn.addEventListener('touchend', e => {
      e.preventDefault();
      keys[keyName] = false;
    }, {passive:false});
    btn.addEventListener('touchcancel', e => {
      e.preventDefault();
      keys[keyName] = false;
    }, {passive:false});
  }

  addTouchListeners(leftBtn, 'left');
  addTouchListeners(rightBtn, 'right');
  addTouchListeners(upBtn, 'up');
  addTouchListeners(downBtn, 'down');

  // Klavye ok tuÅŸlarÄ± iÃ§in
  window.addEventListener('keydown', e => {
    if(e.key === 'ArrowLeft') keys.left = true;
    if(e.key === 'ArrowRight') keys.right = true;
    if(e.key === 'ArrowUp') keys.up = true;
    if(e.key === 'ArrowDown') keys.down = true;
  });

  window.addEventListener('keyup', e => {
    if(e.key === 'ArrowLeft') keys.left = false;
    if(e.key === 'ArrowRight') keys.right = false;
    if(e.key === 'ArrowUp') keys.up = false;
    if(e.key === 'ArrowDown') keys.down = false;
  });

  function drawRoad(){
    ctx.fillStyle = GRAY;
    ctx.fillRect(0,0, WIDTH, HEIGHT);
    ctx.fillStyle = YELLOW;
    for(let i=0; i<HEIGHT; i+=40){
      ctx.fillRect(WIDTH/2 - 5, i, 10, 20);
    }
  }

  function drawCar(x,y){
    ctx.fillStyle = RED;
    ctx.fillRect(x,y, carWidth, carHeight);
  }

  function drawEnemies(){
    ctx.fillStyle = BLUE;
    enemyCars.forEach(enemy => {
      ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
    });
  }

  function moveEnemies(){
    enemyCars.forEach(enemy => {
      enemy.y += enemySpeed;
      if(enemy.y > HEIGHT){
        enemy.x = Math.floor(Math.random() * (WIDTH - 200)) + 100;
        enemy.y = Math.floor(Math.random() * -600) - enemyHeight;
      }
    });
  }

  function checkCollision(r1,r2){
    return !(
      r1.x > r2.x + r2.width ||
      r1.x + r1.width < r2.x ||
      r1.y > r2.y + r2.height ||
      r1.y + r1.height < r2.y
    );
  }

  function checkAnyCollision(playerRect){
    for(let enemy of enemyCars){
      if(checkCollision(playerRect, enemy)) return true;
    }
    return false;
  }

  function gameLoop(){
    if(keys.left && carX > 0) carX -= carSpeed;
    if(keys.right && carX < WIDTH - carWidth) carX += carSpeed;
    if(keys.up && carY > 0) carY -= carSpeed;
    if(keys.down && carY < HEIGHT - carHeight) carY += carSpeed;

    moveEnemies();

    const playerRect = {x: carX, y: carY, width: carWidth, height: carHeight};
    if(checkAnyCollision(playerRect)){
      alert("ðŸ’¥ Ã‡arpÄ±ÅŸma! Oyun Bitti.");
      window.location.reload();
      return;
    }

    drawRoad();
    drawCar(carX, carY);
    drawEnemies();

    requestAnimationFrame(gameLoop);
  }

  gameLoop();
})();
</script>

</body>
</html>
